<div class="flex">
    <button
        nz-button
        nzType="default"
        (click)="onTouched()"
        type="button"
        class="marginRight2s boutonColorPicker"
        [disabled]="disabled"
        nz-popover
        nzPopoverTrigger="click"
        [nzPopoverContent]="colorPickerPanel"
        [(nzPopoverVisible)]="popOverPictoVisible"
    >
        <i nz-icon nzType="picto:color-picker"> </i>
    </button>

    <div *ngIf="value != null" class="flex flexAlignCenter colorPreview">
        <button
            tabindex="-1"
            nz-button
            nzType="link"
            nzSize="small"
            [style.background-color]="value"
            (click)="onTouched()"
            [disabled]="disabled"
            type="button"
            class="flex flexAlignCenter coloredCube marginLeft2s marginRight2s marginBottom2s marginTop2s"
            nz-popover
            nzPopoverTrigger="click"
            [nzPopoverContent]="colorPickerPanel"
            [(nzPopoverVisible)]="popOverColorSelectedVisible"
        >
            <!-- Evite que zorro ne masque le bouton parqu'il est vide -->
            &nbsp;
        </button>

        <button
            tabindex="-1"
            nz-button
            nzType="link"
            type="button"
            class="marginRight2s width100pct"
            (click)="dropColor()"
            [disabled]="disabled"
        >
            <i
                class="pictoTimes flex flexAlignCenter"
                nz-icon
                nzType="picto:times"
            >
            </i>
        </button>
    </div>
</div>

<ng-template #colorPickerPanel>
    <app-color-picker-panel
        [colorToEdit]="value"
        (colorSelected)="selectItem($event)"
    ></app-color-picker-panel>
</ng-template>
