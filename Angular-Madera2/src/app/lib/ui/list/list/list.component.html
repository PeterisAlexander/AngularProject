<ng-content select="app-list-header"></ng-content>

<app-collapsable [handler]="collapseHandler">
    <app-infinite-scroll
        *ngIf="isInfinitList; else finiteListTpl"
        [list]="data"
        [emptyWithoutFilterTemplate]="noDataPlaceholderTpl"
        [emptyWithFilterTemplate]="noDataPlaceholderTpl"
    >
        <ng-container *ngTemplateOutlet="listTpl"></ng-container>
    </app-infinite-scroll>

    <ng-template #finiteListTpl>
        <app-list-viewer
            [list]="data"
            [emptyWithoutFilterTemplate]="noDataPlaceholderTpl"
            [emptyWithFilterTemplate]="noDataPlaceholderTpl"
        >
            <ng-container *ngTemplateOutlet="listTpl"></ng-container>
        </app-list-viewer>
    </ng-template>
</app-collapsable>

<ng-template #infinitTpl> </ng-template>

<ng-template #listTpl>
    <app-card-list [isGrid]="isGrid" [gridPattern]="gridPattern">
        <ng-content></ng-content>
    </app-card-list>
</ng-template>

<ng-template #noDataPlaceholderTpl>
    <div class="list_empty" [class.list_empty-filled]="!isGrid">
        <ng-container *ngIf="emptyTpl != null; else defaultEmptyTpl">
            <ng-container *ngTemplateOutlet="emptyTpl"></ng-container>
        </ng-container>
        <ng-template #defaultEmptyTpl>
            <nz-empty></nz-empty>
        </ng-template>
    </div>
</ng-template>
