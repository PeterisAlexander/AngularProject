<div class="flex flexAlignCenter flexColumn">
    <div class="flex flexAlignCenter">
        <div *ngIf="!value">
            <app-filepicker
                #filePicker
                accept="image/*"
                [disabled]="disabled"
                (valueChange)="changeValue(filePicker.value[0])"
                icon="picto:plus"
                [content]="avatarLabel"
                nzButtonType="dashed"
                nzButtonShape="circle"
                backgroundColor="#FAFAFA"
                fontColor="#999999"
                iconSize="24"
                width="100"
                height="100"
            >
            </app-filepicker>
        </div>

        <div
            *ngIf="value && !disabled"
            (click)="changeValue(null)"
            class="avatarPicker_container flex flexAlignCenter flexJustifyCenter"
        >
            <img [src]="value.content" class="avatarPicker_img" />

            <div class="avatarPicker_overlay"></div>

            <i
                nz-icon
                nzType="picto:trash-alt"
                class="avatarPicker_trashIcon"
            ></i>
        </div>

        <img
            *ngIf="value && disabled"
            [src]="value.content"
            class="avatarPicker_img"
        />
    </div>

    <nz-modal
        *ngIf="imageToCropp != null"
        [(nzVisible)]="isVisible"
        nzTitle="Recadrer"
        (nzOnCancel)="onCancel()"
    >
        <div fxLayout fxLayoutAlign="center center">
            <image-cropper
                [imageChangedEvent]="imageChangedEvent"
                [imageBase64]="imageToCropp"
                [maintainAspectRatio]="isRounded"
                [onlyScaleDown]="onlyScaleDown"
                [resizeToWidth]="resizeToWidth"
                [roundCropper]="isRounded"
                format="png"
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="isImageLoaded = true"
            ></image-cropper>
        </div>
        <div *nzModalFooter>
            <button
                nz-button
                nzType="primary"
                (click)="modalClosed()"
                [disabled]="!isImageLoaded"
            >
                Appliquer
            </button>
        </div>
    </nz-modal>
</div>
